

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>IATI Partner Search &mdash; IATI Partner Search  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="IATI Tooling Overview" href="../overview/" />
    <link rel="prev" title="IATI Partner Search’s documentation" href="../" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../" class="icon icon-home"> IATI Partner Search
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">IATI Partner Search</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pre-commit">Pre-Commit</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-docker">Using Docker</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#python-pipeline-development">Python Pipeline Development</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#get-the-data">Get the Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#run-the-flask-application">Run the Flask application</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">An Overview of IATI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/">IATI Tooling Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../challenges/">Challenges of working with IATI Data</a></li>
</ul>
<p class="caption"><span class="caption-text">Search and NLP Approaches</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../IATI_methods/">IATI Approaches Overview</a></li>
</ul>
<p class="caption"><span class="caption-text">Analysis and Progress Reports</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../count_words/">Word Count Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_download_comparison/">Data Source Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../check_iati_encoding/">Check the CSV Encoding with IATI.Cloud</a></li>
</ul>
<p class="caption"><span class="caption-text">Code:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../continuous_integration/">Continuous Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_documentation/">Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_documentation/#module-ips_python.vectorize">Modeling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_documentation/#module-ips_python.refinement">Results Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_documentation/#module-ips_python.script">Runtime Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../code_documentation/#module-ips_python.utils">Package Utilities</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">IATI Partner Search</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../">Docs</a> &raquo;</li>
        
      <li>IATI Partner Search</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/readme.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="iati-partner-search">
<h1>IATI Partner Search<a class="headerlink" href="#iati-partner-search" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://travis-ci.com/datasciencecampus/iati-partner-search/"><img alt="Build Passing/Failing on TravisCI.com" src="https://travis-ci.com/datasciencecampus/iati-partner-search.svg?branch=master" /></a>
<a class="reference external image-reference" href="https://hub.docker.com/r/datasciencecampus/iati-partner-search-app/tags"><img alt="Docker Automated build" src="https://img.shields.io/docker/automated/jrottenberg/ffmpeg.svg" /></a>
<a class="reference external image-reference" href="https://codecov.io/gh/datasciencecampus/iati-partner-search"><img alt="Code Coverage" src="https://codecov.io/gh/datasciencecampus/iati-partner-search/branch/master/graph/badge.svg" /></a>
<a class="reference external image-reference" href="https://github.com/psf/black"><img alt="Code style: black" src="https://img.shields.io/badge/code%20style-black-000000.svg" /></a>
<p>A tool using NLP technology to match aid funders with potential implementers.</p>
<p>A more detailed break-down of the project can be found <a class="reference external" href="http://datasciencecampus.github.io/iati-partner-search">here</a>.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install the python packages, make sure that you have your virtual environment activated and run the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip install invoke
invoke install-all
</pre></div>
</div>
<p>This will install all of the development and testing packages as well</p>
<div class="section" id="pre-commit">
<h3>Pre-Commit<a class="headerlink" href="#pre-commit" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://pre-commit.com">Pre-commit</a> is a helpful tool that will catch file errors when you try to commit work.
This is helpful so that small bugs and typos aren’t pushed to Github, and we don’t have to wait for out automated tests to find them.</p>
<p>This is optional, but to initialize pre-commit, run the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pre-commit install
</pre></div>
</div>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>To run tests:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invoke <span class="nb">test</span>
</pre></div>
</div>
<p>To run linting, formatting and tests:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invoke ci
</pre></div>
</div>
</div>
<div class="section" id="using-docker">
<h2>Using Docker<a class="headerlink" href="#using-docker" title="Permalink to this headline">¶</a></h2>
<p>This repo provides a Dockerfile (<code class="docutils literal notranslate"><span class="pre">app.Dockerfile</span></code>), that you can build on your machine, which should provide an environment in which the code can execute.</p>
<div class="section" id="python-pipeline-development">
<h3>Python Pipeline Development<a class="headerlink" href="#python-pipeline-development" title="Permalink to this headline">¶</a></h3>
<p>We do not currently publish our images to <a class="reference external" href="https://hub.docker.com/r/datasciencecampus/iati-partner-search-app">DockerHub</a>. You must build them on your machine. Make sure that the Docker VM is running, then run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker build -t iati_partner_search -f ./app.Dockerfile .
</pre></div>
</div>
<p>Or if you have <code class="docutils literal notranslate"><span class="pre">invoke</span></code> installed, run <code class="docutils literal notranslate"><span class="pre">invoke</span> <span class="pre">build-dev-docker</span></code> which will run this command on your behalf.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">-t</span> <span class="pre">iati_partner_search</span></code> means that we’re telling Docker that we want the image to be called <code class="docutils literal notranslate"><span class="pre">iati_partner_search</span></code>.
The <code class="docutils literal notranslate"><span class="pre">-f</span> <span class="pre">./app.Dockerfile</span></code> tells Docker which Dockerfile to use.</p>
<p>Once the image has been built, we can run a container:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker run --name<span class="o">=</span>ips -it -v <span class="si">${</span><span class="nv">pwd</span><span class="si">}</span>:/iati-partner-search -p <span class="m">5000</span>:5000 iati_partner_search bash
</pre></div>
</div>
<p>to break this down:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--name=ips</span></code>: tells what we will call this container when we want to start and stop it again.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-it</span></code>:</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-v</span> <span class="pre">${pwd}:/iati-partner-search</span></code>: tells Docker to share the files on your machine, with the Docker container.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span> <span class="pre">5000:5000</span></code>: tells Docker that we want to map port 5000 on our machine to port 5000 of the container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">iati_partner_search</span></code>: refers to the image that we want to build the container from.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span></code>: is the process that want the container to run. In this case we’re asking it to start the CLI. If instead we want to start the web application, do not include this, and it will be started automatically.</p></li>
</ul>
<p>You can then stop and start the container by running <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">stop</span> <span class="pre">ips</span></code> and <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">start</span> <span class="pre">ips</span></code> respectively.</p>
<p>You can read more about Docker containers and this process <a class="reference external" href="https://docs.docker.com/">here</a>.</p>
</div>
</div>
<div class="section" id="get-the-data">
<h2>Get the Data<a class="headerlink" href="#get-the-data" title="Permalink to this headline">¶</a></h2>
<p>To download the raw data, run:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invoke download-data
</pre></div>
</div>
<p>Note the data is currently just over 1GB in size and so could take some time to download.</p>
<p>If you’re not working from within the Docker container, you will also need to download the nltk data. Execute the following:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>invoke download-nltk-data
</pre></div>
</div>
</div>
<div class="section" id="run-the-flask-application">
<h2>Run the Flask application<a class="headerlink" href="#run-the-flask-application" title="Permalink to this headline">¶</a></h2>
<p>After adding the required data and installing the required packages you will be able to run the web application on your own computer.</p>
<p>In the <code class="docutils literal notranslate"><span class="pre">/data</span></code> directory make sure you have</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span> <span class="n">all_downloaded_records</span><span class="o">.</span><span class="n">csv</span>
<span class="o">-</span> <span class="n">processed_records</span><span class="o">.</span><span class="n">csv</span>
<span class="o">-</span> <span class="n">term_document_matrix</span><span class="o">.</span><span class="n">pkl</span>
<span class="o">-</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">pkl</span>
</pre></div>
</div>
<p>Then, using invoke, run</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>invoke build-docker
</pre></div>
</div>
<p>to build the docker and then</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>invoke run-docker
</pre></div>
</div>
<p>to run it.</p>
<p>After a few seconds of start up time it should be up and running. Navigate to <code class="docutils literal notranslate"><span class="pre">localhost:5000</span></code> in your web browser to view the page.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../overview/" class="btn btn-neutral float-right" title="IATI Tooling Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../" class="btn btn-neutral float-left" title="IATI Partner Search’s documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Department for International Development

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>